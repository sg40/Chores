{% extends 'chores/base.html' %}

{% block title %}Assignments{% endblock %}

{% block content %}
    <!-- Day Navigation -->
    <div class="day-navigation">
        <a href="?day={{ previous_day.id }}" class="nav-arrow">←</a>
        <span class="current-day">{{ current_day.name }}</span>
        <a href="?day={{ next_day.id }}" class="nav-arrow">→</a>
    </div>
    
    {% load tz %}
    {% if last_rotation_time %}
        {% localtime on %}
        <p class="rotation-message">Last rotated: {{ last_rotation_time|date:"F j, Y, g:i a" }}</p>
        {% endlocaltime %}
    {% endif %}
    
    {% for person in people %}
        <div class="user-section">
            <h2 class="user-title">{{ person.name }}</h2>
            {% if person.chore_group %}
                <div class="day-section">
                    <ul class="chore-list">
                        {% for chore in person.chore_group.chores.all %}
                            {% if current_day in chore.days.all %}
                                <li class="chore-item" onclick="window.location.href='{% url 'chore_detail' chore.pk %}'">
                                    <span class="chore-name">{{ chore.name }}</span>
                                </li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
            {% else %}
                <p class="no-chores">No chore group assigned.</p>
            {% endif %}
        </div>
    {% endfor %}
{% endblock %}